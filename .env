# # SECRET_KEY=votre_clé_secrète
# # DEBUG=False
# # ALLOWED_HOSTS=*
# # DATABASE_URL=postgresql://chain_x3sl_user:wWfhmbDwm79wTAiVinXZ9skPQiViNwzB@dpg-d37bsmbuibrs738u2grg-a.oregon-postgres.render.com/chain_x3sl
# # CORS_ALLOWED_ORIGINS=http://localhost:3000
# # ALLOWED_HOSTS=votre-domaine.com,www.votre-domaine.com,api.votre-domaine.com,ip_du_vps
# # SECRET_KEY=rg3xn0ah@e0zch=!-#8@a0@2r@^o&4b5&lx^^q!tc+t3^2wlrs
# # ALLOWED_HOSTS=votre-domaine.com,www.votre-domaine.com,api.votre-domaine.com,ip_du_vps
# # DATABASE_URL=postgresql://lanfia_user:issa01@localhost/lanfia_db 

# # [Unit]
# # Description=Gunicorn instance pour Lanfia API
# # After=network.target

# # [Service]
# # User=lanfial
# # Group=www-data
# # WorkingDirectory=/home/lanfial/backendsupply
# # Environment=PATH=/home/lanfial/backendsupply/venv/bin
# # ExecStart=/home/lanfial/backendsupply/venv/bin/gunicorn --workers 3 --bind 127.0.0.1:8000 lanfiatect.wsgi:application
# # Restart=always
# # RestartSec=3

# # [Install]
# # WantedBy=multi-user.target


# # HTTP redirect to HTTPS
# server {
#     listen 80;
#     server_name lanfialink.com;
#     return 301 https://$server_name$request_uri;
# }

# # HTTPS server
# server {
#     listen 443 ssl http2;
#     server_name lanfialink.com;

#     # SSL configuration (à générer avec Certbot)
#     ssl_certificate /etc/letsencrypt/live/lanfialink.com/fullchain.pem;
#     ssl_certificate_key /etc/letsencrypt/live/lanfialink.com/privkey.pem;
#     include /etc/letsencrypt/options-ssl-nginx.conf;
#     ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;

#     # Security headers
#     add_header X-Frame-Options "SAMEORIGIN" always;
#     add_header X-XSS-Protection "1; mode=block" always;
#     add_header X-Content-Type-Options "nosniff" always;
#     add_header Referrer-Policy "no-referrer-when-downgrade" always;

#     # Gzip compression
#     gzip on;
#     gzip_vary on;
#     gzip_min_length 1024;
#     gzip_types text/plain text/css text/xml text/javascript application/javascript application/xml+rss application/json;

#     # Root location
#     location / {
#         proxy_pass http://127.0.0.1:3001;
#         proxy_http_version 1.1;
#         proxy_set_header Upgrade $http_upgrade;
#         proxy_set_header Connection 'upgrade';
#         proxy_set_header Host $host;
#         proxy_set_header X-Real-IP $remote_addr;
#         proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#         proxy_set_header X-Forwarded-Proto $scheme;
#         proxy_cache_bypass $http_upgrade;
        
#         # Timeouts
#         proxy_connect_timeout 300s;
#         proxy_send_timeout 300s;
#         proxy_read_timeout 300s;
#     }

#     # Static files caching
#     location /_next/static/ {
#         alias /home/lanfial/distribut/.next/static/;
#         expires 1y;
#         add_header Cache-Control "public, immutable";
#         access_log off;
#     }

#     # Public folder
#     location /public/ {
#         alias /home/lanfial/distribut/public/;
#         expires 1d;
#         add_header Cache-Control "public";
#         access_log off;
#     }

#     # Client settings
#     client_max_body_size 100M;
#     keepalive_timeout 15;
# }



# Last login: Thu Oct 23 20:42:55 on ttys006
# ouedraogoissa@MacBook-Pro-de-OUEDRAOGO ~ % ssh lanfia@185.98.139.209
# lanfia@185.98.139.209's password: 
# Linux vps114686 6.12.38+deb13-amd64 #1 SMP PREEMPT_DYNAMIC Debian 6.12.38-1 (2025-07-16) x86_64

# The programs included with the Debian GNU/Linux system are free software;
# the exact distribution terms for each program are described in the
# individual files in /usr/share/doc/*/copyright.

# Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
# permitted by applicable law.
# Last login: Sun Oct 19 17:37:47 2025 from 102.67.255.129
# lanfia@vps114686:~$ Read from remote host 185.98.139.209: Connection reset by peer
# Connection to 185.98.139.209 closed.
# client_loop: send disconnect: Broken pipe
# ouedraogoissa@MacBook-Pro-de-OUEDRAOGO ~ % 
#   [Restauré 27 oct. 2025 à 19:43:34]
# Last login: Mon Oct 27 19:43:34 on ttys002
# Restored session: Mon Oct 27 19:42:39 GMT 2025
# ouedraogoissa@MacBook-Pro-de-OUEDRAOGO ~ % ip show
# zsh: command not found: ip
# ouedraogoissa@MacBook-Pro-de-OUEDRAOGO ~ % ssh lanfia@185.98.139.209
# ouedraogoissa@MacBook-Pro-de-OUEDRAOGO ~ % 
# ouedraogoissa@MacBook-Pro-de-OUEDRAOGO ~ % ssh lanfia@185.98.139.209
# lanfia@185.98.139.209's password: 
# Linux vps114686 6.12.38+deb13-amd64 #1 SMP PREEMPT_DYNAMIC Debian 6.12.38-1 (2025-07-16) x86_64

# The programs included with the Debian GNU/Linux system are free software;
# the exact distribution terms for each program are described in the
# individual files in /usr/share/doc/*/copyright.

# Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
# permitted by applicable law.
# Last login: Thu Oct 23 22:43:18 2025 from 102.67.255.129
# lanfia@vps114686:~$ ls
# backendsupply  logs
# lanfia@vps114686:~$ cd home
# -bash: cd: home: Aucun fichier ou dossier de ce type
# lanfia@vps114686:~$ cd ..
# lanfia@vps114686:/home$ ls
# lanfia
# lanfia@vps114686:/home$ mkdir lanfialink
# mkdir: cannot create directory 'lanfialink': Permission denied
# lanfia@vps114686:/home$ cd ..
# lanfia@vps114686:/$ exit
# déconnexion
# Connection to 185.98.139.209 closed.
# ouedraogoissa@MacBook-Pro-de-OUEDRAOGO ~ % ssh root@185.98.139.209
# root@185.98.139.209's password: 
# Permission denied, please try again.
# root@185.98.139.209's password: 
# Connection closed by 185.98.139.209 port 22
# ouedraogoissa@MacBook-Pro-de-OUEDRAOGO ~ % ssh root@185.98.139.209
# root@185.98.139.209's password: 
# Linux vps114686 6.12.38+deb13-amd64 #1 SMP PREEMPT_DYNAMIC Debian 6.12.38-1 (2025-07-16) x86_64

# The programs included with the Debian GNU/Linux system are free software;
# the exact distribution terms for each program are described in the
# individual files in /usr/share/doc/*/copyright.

# Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
# permitted by applicable law.
# Last login: Sun Sep 21 20:34:17 2025 from 102.67.255.129
# root@vps114686:~# ls
# root@vps114686:~# cd ..
# root@vps114686:/# ls
# aquota.group  bin   dev  home  lib64	   media  opt	quarantaine  run   srv	tmp  var
# aquota.user   boot  etc  lib   lost+found  mnt	  proc	root	     sbin  sys	usr
# root@vps114686:/# cd home/lanfia/
# root@vps114686:/home/lanfia# cd ..
# root@vps114686:/home# adduser lanfial
# perl: warning: Setting locale failed.
# perl: warning: Please check that your locale settings:
# 	LANGUAGE = (unset),
# 	LC_ALL = (unset),
# 	LC_CTYPE = "UTF-8",
# 	LANG = "fr_FR.UTF-8"
#     are supported and installed on your system.
# perl: warning: Falling back to a fallback locale ("fr_FR.UTF-8").
# Ajout de l'utilisateur « lanfial » ...
# Ajout du nouveau groupe « lanfial » (1001) ...
# Ajout du nouvel utilisateur « lanfial » (1001) avec le groupe « lanfial » (1001) ...
# Création du répertoire personnel « /home/lanfial » ...
# Copie des fichiers depuis « /etc/skel » ...
# New password: 
# Retype new password: 
# Sorry, passwords do not match.
# passwd: Authentication token manipulation error
# passwd: password unchanged
# Essayer à nouveau ? [o/N]o
# New password: 
# Retype new password: 
# passwd: password updated successfully
# Changing the user information for lanfial
# Enter the new value, or press ENTER for the default
# 	Full Name []: lanfialink
# 	Room Number []: lanfialink
# 	Work Phone []: 0778882517
# 	Home Phone []: 0778882517
# 	Other []: 0778882517
# Cette information est-elle correcte ? [O/n]y
# Ajout du nouvel utilisateur « lanfial » aux groupes supplémentaires « users » ...
# Ajout de l'utilisateur « lanfial » au groupe « users » ...
# root@vps114686:/home# ls
# lanfia	lanfial
# root@vps114686:/home# exit
# déconnexion
# Connection to 185.98.139.209 closed.
# ouedraogoissa@MacBook-Pro-de-OUEDRAOGO ~ % ssh lanfial@185.98.139.209
# lanfial@185.98.139.209's password: 
# Linux vps114686 6.12.38+deb13-amd64 #1 SMP PREEMPT_DYNAMIC Debian 6.12.38-1 (2025-07-16) x86_64

# The programs included with the Debian GNU/Linux system are free software;
# the exact distribution terms for each program are described in the
# individual files in /usr/share/doc/*/copyright.

# Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
# permitted by applicable law.
# lanfial@vps114686:~$ ls
# lanfial@vps114686:~$ cd ..
# lanfial@vps114686:/home$ ls
# lanfia  lanfial
# lanfial@vps114686:/home$ cd lanfial
# lanfial@vps114686:~$ cd ..
# lanfial@vps114686:/home$ exit
# déconnexion
# Connection to 185.98.139.209 closed.
# ouedraogoissa@MacBook-Pro-de-OUEDRAOGO ~ % ssh root@185.98.139.209   
# root@185.98.139.209's password: 
# Permission denied, please try again.
# root@185.98.139.209's password: 
# Permission denied, please try again.
# root@185.98.139.209's password: 

# ouedraogoissa@MacBook-Pro-de-OUEDRAOGO ~ % 
# ouedraogoissa@MacBook-Pro-de-OUEDRAOGO ~ % ssh root@185.98.139.209
# root@185.98.139.209's password: 
# Linux vps114686 6.12.38+deb13-amd64 #1 SMP PREEMPT_DYNAMIC Debian 6.12.38-1 (2025-07-16) x86_64

# The programs included with the Debian GNU/Linux system are free software;
# the exact distribution terms for each program are described in the
# individual files in /usr/share/doc/*/copyright.

# Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
# permitted by applicable law.
# Last login: Sun Nov  2 13:26:55 2025 from 102.67.255.129
# root@vps114686:~# usermod -aG sudo lanfial
# root@vps114686:~# su - lanfial
# lanfial@vps114686:~$ sudo ufw allow ssh
# [sudo] Mot de passe de lanfial : 
# sudo: ufw : commande introuvable
# lanfial@vps114686:~$ sudo ufw allow ssh
# sudo: ufw : commande introuvable
# lanfial@vps114686:~$ sudo -u postgres psql
# could not change directory to "/home/lanfial": Permission non accordée
# psql (15.14 (Debian 15.14-0+deb12u1))
# Type "help" for help.

# postgres=# CREATE DATABASE lanfialink_db;
# CREATE DATABASE
# postgres=# CREATE USER lanfialink_user WITH PASSWORD 'issa01';
# CREATE ROLE
# postgres=# 
# postgres=# ALTER ROLE lanfialink_user SET client_encoding TO 'utf8';
# ALTER ROLE
# postgres=# ALTER ROLE lanfialink_user SET client_encoding TO 'utf8';
# ALTER ROLE
# postgres=# GRANT ALL PRIVILEGES ON DATABASE lanfialink_db TO lanfialink_user;
# GRANT
# postgres=# \q
# lanfial@vps114686:~$ ls
# lanfial@vps114686:~$ ls
# lanfial@vps114686:~$ 
# lanfial@vps114686:~$ cd ..
# lanfial@vps114686:/home$ cd lanfial/
# lanfial@vps114686:~$ 
# lanfial@vps114686:~$ 
# lanfial@vps114686:~$ 
# lanfial@vps114686:~$ ls
# lanfial@vps114686:~$ 
# lanfial@vps114686:~$ git clone https://github.com/HARD953/backendsupply.git
# Clonage dans 'backendsupply'...
# remote: Enumerating objects: 1443, done.
# remote: Counting objects: 100% (301/301), done.
# remote: Compressing objects: 100% (244/244), done.
# remote: Total 1443 (delta 221), reused 126 (delta 57), pack-reused 1142 (from 1)
# Réception d'objets: 100% (1443/1443), 5.41 Mio | 20.98 Mio/s, fait.
# Résolution des deltas: 100% (1140/1140), fait.
# lanfial@vps114686:~$ cd backendsupply
# lanfial@vps114686:~/backendsupply$ python3 -m venv venv2
# lanfial@vps114686:~/backendsupply$ cd ..
# lanfial@vps114686:~$ rm -rf backendsupply/
# lanfial@vps114686:~$ ls
# lanfial@vps114686:~$ git clone https://github.com/HARD953/backendsupply.git
# Clonage dans 'backendsupply'...
# remote: Enumerating objects: 1443, done.
# remote: Counting objects: 100% (301/301), done.
# remote: Compressing objects: 100% (244/244), done.
# remote: Total 1443 (delta 221), reused 126 (delta 57), pack-reused 1142 (from 1)
# Réception d'objets: 100% (1443/1443), 5.41 Mio | 20.82 Mio/s, fait.
# Résolution des deltas: 100% (1140/1140), fait.
# lanfial@vps114686:~$ cd backendsupply/
# lanfial@vps114686:~/backendsupply$ python3 -m venv venv
# lanfial@vps114686:~/backendsupply$ source venv/bin/activate
# (venv) lanfial@vps114686:~/backendsupply$ pip install -r requirements.txt
# Collecting asgiref==3.8.1
#   Downloading asgiref-3.8.1-py3-none-any.whl (23 kB)
# Collecting charset-normalizer==3.4.3
#   Downloading charset_normalizer-3.4.3-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl (150 kB)
#      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 150.3/150.3 kB 11.9 MB/s eta 0:00:00
# Collecting dj-database-url==2.3.0
#   Downloading dj_database_url-2.3.0-py3-none-any.whl (7.8 kB)
# Collecting Django==5.2.1
#   Downloading django-5.2.1-py3-none-any.whl (8.3 MB)
#      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 8.3/8.3 MB 43.8 MB/s eta 0:00:00
# Collecting django-cors-headers==4.7.0
#   Downloading django_cors_headers-4.7.0-py3-none-any.whl (12 kB)
# Collecting django-filter==25.1
#   Downloading django_filter-25.1-py3-none-any.whl (94 kB)
#      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 94.1/94.1 kB 11.3 MB/s eta 0:00:00
# Collecting djangorestframework==3.16.0
#   Downloading djangorestframework-3.16.0-py3-none-any.whl (1.1 MB)
#      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.1/1.1 MB 53.5 MB/s eta 0:00:00
# Collecting djangorestframework_simplejwt==5.5.0
#   Downloading djangorestframework_simplejwt-5.5.0-py3-none-any.whl (103 kB)
#      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 103.5/103.5 kB 46.9 MB/s eta 0:00:00
# Collecting et_xmlfile==2.0.0
#   Downloading et_xmlfile-2.0.0-py3-none-any.whl (18 kB)
# Collecting gunicorn==23.0.0
#   Downloading gunicorn-23.0.0-py3-none-any.whl (85 kB)
#      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 85.0/85.0 kB 10.5 MB/s eta 0:00:00
# Collecting numpy==2.3.3
#   Downloading numpy-2.3.3-cp311-cp311-manylinux_2_27_x86_64.manylinux_2_28_x86_64.whl (16.9 MB)
#      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 16.9/16.9 MB 22.0 MB/s eta 0:00:00
# Collecting openpyxl==3.1.5
#   Downloading openpyxl-3.1.5-py2.py3-none-any.whl (250 kB)
#      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 250.9/250.9 kB 60.2 MB/s eta 0:00:00
# Collecting packaging==25.0
#   Downloading packaging-25.0-py3-none-any.whl (66 kB)
#      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 66.5/66.5 kB 21.1 MB/s eta 0:00:00
# Collecting pandas==2.3.2
#   Downloading pandas-2.3.2-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (12.4 MB)
#      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 12.4/12.4 MB 35.6 MB/s eta 0:00:00
# Collecting pillow==11.2.1
#   Downloading pillow-11.2.1-cp311-cp311-manylinux_2_28_x86_64.whl (4.6 MB)
#      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 4.6/4.6 MB 42.0 MB/s eta 0:00:00
# Collecting psycopg2-binary==2.9.10
#   Downloading psycopg2_binary-2.9.10-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (3.0 MB)
#      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 3.0/3.0 MB 55.8 MB/s eta 0:00:00
# Collecting pycparser==2.22
#   Downloading pycparser-2.22-py3-none-any.whl (117 kB)
#      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 117.6/117.6 kB 14.9 MB/s eta 0:00:00
# Collecting PyJWT==2.9.0
#   Downloading PyJWT-2.9.0-py3-none-any.whl (22 kB)
# Collecting python-dateutil==2.9.0.post0
#   Downloading python_dateutil-2.9.0.post0-py2.py3-none-any.whl (229 kB)
#      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 229.9/229.9 kB 24.8 MB/s eta 0:00:00
# Collecting python-decouple==3.8
#   Downloading python_decouple-3.8-py3-none-any.whl (9.9 kB)
# Collecting pytz==2025.2
#   Downloading pytz-2025.2-py2.py3-none-any.whl (509 kB)
#      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 509.2/509.2 kB 61.8 MB/s eta 0:00:00
# Collecting reportlab==4.4.4
#   Downloading reportlab-4.4.4-py3-none-any.whl (2.0 MB)
#      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.0/2.0 MB 54.0 MB/s eta 0:00:00
# Collecting six==1.17.0
#   Downloading six-1.17.0-py2.py3-none-any.whl (11 kB)
# Collecting sqlparse==0.5.3
#   Downloading sqlparse-0.5.3-py3-none-any.whl (44 kB)
#      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 44.4/44.4 kB 19.6 MB/s eta 0:00:00
# Collecting typing_extensions==4.14.0
#   Downloading typing_extensions-4.14.0-py3-none-any.whl (43 kB)
#      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 43.8/43.8 kB 19.2 MB/s eta 0:00:00
# Collecting tzdata==2025.2
#   Downloading tzdata-2025.2-py2.py3-none-any.whl (347 kB)
#      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 347.8/347.8 kB 65.7 MB/s eta 0:00:00
# Installing collected packages: pytz, python-decouple, tzdata, typing_extensions, sqlparse, six, PyJWT, pycparser, psycopg2-binary, pillow, packaging, numpy, et_xmlfile, charset-normalizer, asgiref, reportlab, python-dateutil, openpyxl, gunicorn, Django, pandas, djangorestframework, django-filter, django-cors-headers, dj-database-url, djangorestframework_simplejwt
# Successfully installed Django-5.2.1 PyJWT-2.9.0 asgiref-3.8.1 charset-normalizer-3.4.3 dj-database-url-2.3.0 django-cors-headers-4.7.0 django-filter-25.1 djangorestframework-3.16.0 djangorestframework_simplejwt-5.5.0 et_xmlfile-2.0.0 gunicorn-23.0.0 numpy-2.3.3 openpyxl-3.1.5 packaging-25.0 pandas-2.3.2 pillow-11.2.1 psycopg2-binary-2.9.10 pycparser-2.22 python-dateutil-2.9.0.post0 python-decouple-3.8 pytz-2025.2 reportlab-4.4.4 six-1.17.0 sqlparse-0.5.3 typing_extensions-4.14.0 tzdata-2025.2
# (venv) lanfial@vps114686:~/backendsupply$ pip install gunicorn psycopg2-binary
# Requirement already satisfied: gunicorn in ./venv/lib/python3.11/site-packages (23.0.0)
# Requirement already satisfied: psycopg2-binary in ./venv/lib/python3.11/site-packages (2.9.10)
# Requirement already satisfied: packaging in ./venv/lib/python3.11/site-packages (from gunicorn) (25.0)
# (venv) lanfial@vps114686:~/backendsupply$ nano .env
# (venv) lanfial@vps114686:~/backendsupply$ nano .env
# (venv) lanfial@vps114686:~/backendsupply$ python manage.py migrate
# Traceback (most recent call last):
#   File "/home/lanfial/backendsupply/manage.py", line 22, in <module>
#     main()
#   File "/home/lanfial/backendsupply/manage.py", line 18, in main
#     execute_from_command_line(sys.argv)
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/__init__.py", line 442, in execute_from_command_line
#     utility.execute()
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/__init__.py", line 436, in execute
#     self.fetch_command(subcommand).run_from_argv(self.argv)
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/base.py", line 416, in run_from_argv
#     self.execute(*args, **cmd_options)
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/base.py", line 460, in execute
#     output = self.handle(*args, **options)
#              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/base.py", line 107, in wrapper
#     res = handle_func(*args, **kwargs)
#           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/commands/migrate.py", line 114, in handle
#     executor = MigrationExecutor(connection, self.migration_progress_callback)
#                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/migrations/executor.py", line 18, in __init__
#     self.loader = MigrationLoader(self.connection)
#                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/migrations/loader.py", line 58, in __init__
#     self.build_graph()
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/migrations/loader.py", line 235, in build_graph
#     self.applied_migrations = recorder.applied_migrations()
#                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/migrations/recorder.py", line 89, in applied_migrations
#     if self.has_table():
#        ^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/migrations/recorder.py", line 63, in has_table
#     with self.connection.cursor() as cursor:
#          ^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/utils/asyncio.py", line 26, in inner
#     return func(*args, **kwargs)
#            ^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/base/base.py", line 320, in cursor
#     return self._cursor()
#            ^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/dummy/base.py", line 20, in complain
#     raise ImproperlyConfigured(
# django.core.exceptions.ImproperlyConfigured: settings.DATABASES is improperly configured. Please supply the ENGINE value. Check settings documentation for more details.
# (venv) lanfial@vps114686:~/backendsupply$ ls
# api  db.sqlite3  lanfiatect  manage.py  media  Procfile  requirements.txt  seed_data.py  venv
# (venv) lanfial@vps114686:~/backendsupply$ cd api/
# (venv) lanfial@vps114686:~/backendsupply/api$ ls
# admin.py     __pycache__         serializers_rapports.py  urls.py       views.py
# apps.py      serializers1.py     serializers_rep.py       views1.py     views_rapports.py
# __init__.py  serializers3.py     signals.py               views4.py
# migrations   serializers_per.py  test.py                  viewser.py
# models.py    serializers.py      tests.py                 views_per.py
# (venv) lanfial@vps114686:~/backendsupply/api$ cd ,,
# -bash: cd: ,,: Aucun fichier ou dossier de ce type
# (venv) lanfial@vps114686:~/backendsupply/api$ cd ..
# (venv) lanfial@vps114686:~/backendsupply$ ls
# api  db.sqlite3  lanfiatect  manage.py  media  Procfile  requirements.txt  seed_data.py  venv
# (venv) lanfial@vps114686:~/backendsupply$ cd lanfiatect/
# (venv) lanfial@vps114686:~/backendsupply/lanfiatect$ ls
# asgi.py  __init__.py  __pycache__  settings.py  urls.py  wsgi.py
# (venv) lanfial@vps114686:~/backendsupply/lanfiatect$ sudo nano settings.py
# [sudo] Mot de passe de lanfial : 
# (venv) lanfial@vps114686:~/backendsupply/lanfiatect$ cd ..
# (venv) lanfial@vps114686:~/backendsupply$ python manage.py migrate
# Traceback (most recent call last):
#   File "/home/lanfial/backendsupply/manage.py", line 22, in <module>
#     main()
#   File "/home/lanfial/backendsupply/manage.py", line 18, in main
#     execute_from_command_line(sys.argv)
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/__init__.py", line 442, in execute_from_command_line
#     utility.execute()
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/__init__.py", line 436, in execute
#     self.fetch_command(subcommand).run_from_argv(self.argv)
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/base.py", line 416, in run_from_argv
#     self.execute(*args, **cmd_options)
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/base.py", line 460, in execute
#     output = self.handle(*args, **options)
#              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/base.py", line 107, in wrapper
#     res = handle_func(*args, **kwargs)
#           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/commands/migrate.py", line 114, in handle
#     executor = MigrationExecutor(connection, self.migration_progress_callback)
#                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/migrations/executor.py", line 18, in __init__
#     self.loader = MigrationLoader(self.connection)
#                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/migrations/loader.py", line 58, in __init__
#     self.build_graph()
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/migrations/loader.py", line 235, in build_graph
#     self.applied_migrations = recorder.applied_migrations()
#                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/migrations/recorder.py", line 89, in applied_migrations
#     if self.has_table():
#        ^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/migrations/recorder.py", line 63, in has_table
#     with self.connection.cursor() as cursor:
#          ^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/utils/asyncio.py", line 26, in inner
#     return func(*args, **kwargs)
#            ^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/base/base.py", line 320, in cursor
#     return self._cursor()
#            ^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/dummy/base.py", line 20, in complain
#     raise ImproperlyConfigured(
# django.core.exceptions.ImproperlyConfigured: settings.DATABASES is improperly configured. Please supply the ENGINE value. Check settings documentation for more details.
# (venv) lanfial@vps114686:~/backendsupply$ ls
# api  db.sqlite3  lanfiatect  manage.py  media  Procfile  requirements.txt  seed_data.py  venv
# (venv) lanfial@vps114686:~/backendsupply$ sudo nano .env
# (venv) lanfial@vps114686:~/backendsupply$ 
# (venv) lanfial@vps114686:~/backendsupply$ 
# (venv) lanfial@vps114686:~/backendsupply$ 
# (venv) lanfial@vps114686:~/backendsupply$ ls
# api  db.sqlite3  lanfiatect  manage.py  media  Procfile  requirements.txt  seed_data.py  venv
# (venv) lanfial@vps114686:~/backendsupply$ python manage.py 

# Type 'manage.py help <subcommand>' for help on a specific subcommand.

# Available subcommands:

# [auth]
#     changepassword
#     createsuperuser

# [contenttypes]
#     remove_stale_contenttypes

# [django]
#     check
#     compilemessages
#     createcachetable
#     dbshell
#     diffsettings
#     dumpdata
#     flush
#     inspectdb
#     loaddata
#     makemessages
#     makemigrations
#     migrate
#     optimizemigration
#     sendtestemail
#     shell
#     showmigrations
#     sqlflush
#     sqlmigrate
#     sqlsequencereset
#     squashmigrations
#     startapp
#     startproject
#     test
#     testserver

# [rest_framework]
#     generateschema

# [sessions]
#     clearsessions

# [staticfiles]
#     collectstatic
#     findstatic
#     runserver
# (venv) lanfial@vps114686:~/backendsupply$ python manage.py makemigerations
# Unknown command: 'makemigerations'. Did you mean makemigrations?
# Type 'manage.py help' for usage.
# (venv) lanfial@vps114686:~/backendsupply$ python manage.py makemigerations api
# Unknown command: 'makemigerations'. Did you mean makemigrations?
# Type 'manage.py help' for usage.
# (venv) lanfial@vps114686:~/backendsupply$ python manage.py makemigrations api
# No changes detected in app 'api'
# (venv) lanfial@vps114686:~/backendsupply$ ls
# api  db.sqlite3  lanfiatect  manage.py  media  Procfile  requirements.txt  seed_data.py  venv
# (venv) lanfial@vps114686:~/backendsupply$ cd api/
# (venv) lanfial@vps114686:~/backendsupply/api$ ls
# admin.py  __init__.py  models.py    serializers1.py  serializers_per.py  serializers_rapports.py  signals.py  tests.py  views1.py  viewser.py    views.py
# apps.py   migrations   __pycache__  serializers3.py  serializers.py      serializers_rep.py       test.py     urls.py   views4.py  views_per.py  views_rapports.py
# (venv) lanfial@vps114686:~/backendsupply/api$ sudo rm -rf migrations
# (venv) lanfial@vps114686:~/backendsupply/api$ ls
# admin.py  __init__.py  __pycache__      serializers3.py     serializers.py           serializers_rep.py  test.py   urls.py    views4.py   views_per.py  views_rapports.py
# apps.py   models.py    serializers1.py  serializers_per.py  serializers_rapports.py  signals.py          tests.py  views1.py  viewser.py  views.py
# (venv) lanfial@vps114686:~/backendsupply/api$ cd ..
# (venv) lanfial@vps114686:~/backendsupply$ python manage.py makemigrations api
# Migrations for 'api':
#   api/migrations/0001_initial.py
#     + Create model Category
#     + Create model Order
#     + Create model Permission
#     + Create model ProductFormat
#     + Create model Supplier
#     + Create model Dispute
#     + Create model PointOfSale
#     + Add field point_of_sale to order
#     + Create model MobileVendor
#     + Create model Product
#     + Create model Notification
#     + Create model ProductImage
#     + Create model ProductVariant
#     + Create model OrderItem
#     + Create model Purchase
#     + Create model Report
#     + Create model Role
#     + Create model StockMovement
#     + Create model Token
#     + Create model TokenTransaction
#     + Create model UserProfile
#     + Add field customer to order
#     + Create model VendorActivity
#     + Create model Sale
#     + Create model VendorPerformance
# (venv) lanfial@vps114686:~/backendsupply$ python manage.py migrate
# Traceback (most recent call last):
#   File "/home/lanfial/backendsupply/manage.py", line 22, in <module>
#     main()
#   File "/home/lanfial/backendsupply/manage.py", line 18, in main
#     execute_from_command_line(sys.argv)
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/__init__.py", line 442, in execute_from_command_line
#     utility.execute()
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/__init__.py", line 436, in execute
#     self.fetch_command(subcommand).run_from_argv(self.argv)
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/base.py", line 416, in run_from_argv
#     self.execute(*args, **cmd_options)
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/base.py", line 460, in execute
#     output = self.handle(*args, **options)
#              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/base.py", line 107, in wrapper
#     res = handle_func(*args, **kwargs)
#           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/commands/migrate.py", line 114, in handle
#     executor = MigrationExecutor(connection, self.migration_progress_callback)
#                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/migrations/executor.py", line 18, in __init__
#     self.loader = MigrationLoader(self.connection)
#                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/migrations/loader.py", line 58, in __init__
#     self.build_graph()
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/migrations/loader.py", line 235, in build_graph
#     self.applied_migrations = recorder.applied_migrations()
#                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/migrations/recorder.py", line 89, in applied_migrations
#     if self.has_table():
#        ^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/migrations/recorder.py", line 63, in has_table
#     with self.connection.cursor() as cursor:
#          ^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/utils/asyncio.py", line 26, in inner
#     return func(*args, **kwargs)
#            ^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/base/base.py", line 320, in cursor
#     return self._cursor()
#            ^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/dummy/base.py", line 20, in complain
#     raise ImproperlyConfigured(
# django.core.exceptions.ImproperlyConfigured: settings.DATABASES is improperly configured. Please supply the ENGINE value. Check settings documentation for more details.
# (venv) lanfial@vps114686:~/backendsupply$ sudo nano .env 
# (venv) lanfial@vps114686:~/backendsupply$ cd lanfiatect/
# (venv) lanfial@vps114686:~/backendsupply/lanfiatect$ sudo nano settings.py
# (venv) lanfial@vps114686:~/backendsupply/lanfiatect$ cd ..
# (venv) lanfial@vps114686:~/backendsupply$ python manage.py migrate
# Operations to perform:
#   Apply all migrations: admin, api, auth, contenttypes, sessions
# Running migrations:
# Traceback (most recent call last):
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 103, in _execute
#     return self.cursor.execute(sql)
#            ^^^^^^^^^^^^^^^^^^^^^^^^
# psycopg2.errors.InsufficientPrivilege: ERREUR:  droit refusé pour le schéma public
# LINE 1: CREATE TABLE "django_migrations" ("id" bigint NOT NULL PRIMA...
#                      ^


# The above exception was the direct cause of the following exception:

# Traceback (most recent call last):
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/migrations/recorder.py", line 78, in ensure_schema
#     editor.create_model(self.Migration)
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/base/schema.py", line 512, in create_model
#     self.execute(sql, params or None)
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/postgresql/schema.py", line 45, in execute
#     return super().execute(sql, params)
#            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/base/schema.py", line 204, in execute
#     cursor.execute(sql, params)
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 122, in execute
#     return super().execute(sql, params)
#            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 79, in execute
#     return self._execute_with_wrappers(
#            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
#     return executor(sql, params, many, context)
#            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 100, in _execute
#     with self.db.wrap_database_errors:
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/utils.py", line 91, in __exit__
#     raise dj_exc_value.with_traceback(traceback) from exc_value
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 103, in _execute
#     return self.cursor.execute(sql)
#            ^^^^^^^^^^^^^^^^^^^^^^^^
# django.db.utils.ProgrammingError: ERREUR:  droit refusé pour le schéma public
# LINE 1: CREATE TABLE "django_migrations" ("id" bigint NOT NULL PRIMA...
#                      ^


# During handling of the above exception, another exception occurred:

# Traceback (most recent call last):
#   File "/home/lanfial/backendsupply/manage.py", line 22, in <module>
#     main()
#   File "/home/lanfial/backendsupply/manage.py", line 18, in main
#     execute_from_command_line(sys.argv)
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/__init__.py", line 442, in execute_from_command_line
#     utility.execute()
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/__init__.py", line 436, in execute
#     self.fetch_command(subcommand).run_from_argv(self.argv)
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/base.py", line 416, in run_from_argv
#     self.execute(*args, **cmd_options)
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/base.py", line 460, in execute
#     output = self.handle(*args, **options)
#              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/base.py", line 107, in wrapper
#     res = handle_func(*args, **kwargs)
#           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/commands/migrate.py", line 353, in handle
#     post_migrate_state = executor.migrate(
#                          ^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/migrations/executor.py", line 107, in migrate
#     self.recorder.ensure_schema()
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/migrations/recorder.py", line 80, in ensure_schema
#     raise MigrationSchemaMissing(
# django.db.migrations.exceptions.MigrationSchemaMissing: Unable to create the django_migrations table (ERREUR:  droit refusé pour le schéma public
# LINE 1: CREATE TABLE "django_migrations" ("id" bigint NOT NULL PRIMA...
#                      ^
# )
# (venv) lanfial@vps114686:~/backendsupply$ ls
# api  db.sqlite3  lanfiatect  manage.py  media  Procfile  requirements.txt  seed_data.py  venv
# (venv) lanfial@vps114686:~/backendsupply$ sudo -u postgres psql
# could not change directory to "/home/lanfial/backendsupply": Permission non accordée
# psql (15.14 (Debian 15.14-0+deb12u1))
# Type "help" for help.

# postgres=# GRANT ALL ON SCHEMA public TO lanfialink_user;
# GRANT
# postgres=# GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO lanfialink_user;
# GRANT
# postgres=# GRANT ALL PRIVILEGES ON ALL SEQUENCES IN SCHEMA public TO lanfialink_user;
# GRANT
# postgres=# ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT ALL ON TABLES TO lanfialink_user;
# ALTER DEFAULT PRIVILEGES
# postgres=# ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT ALL ON SEQUENCES TO lanfialink_user;
# ALTER DEFAULT PRIVILEGES
# postgres=# exit
# (venv) lanfial@vps114686:~/backendsupply$ python manage.py migrate
# Operations to perform:
#   Apply all migrations: admin, api, auth, contenttypes, sessions
# Running migrations:
# Traceback (most recent call last):
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 103, in _execute
#     return self.cursor.execute(sql)
#            ^^^^^^^^^^^^^^^^^^^^^^^^
# psycopg2.errors.InsufficientPrivilege: ERREUR:  droit refusé pour le schéma public
# LINE 1: CREATE TABLE "django_migrations" ("id" bigint NOT NULL PRIMA...
#                      ^


# The above exception was the direct cause of the following exception:

# Traceback (most recent call last):
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/migrations/recorder.py", line 78, in ensure_schema
#     editor.create_model(self.Migration)
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/base/schema.py", line 512, in create_model
#     self.execute(sql, params or None)
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/postgresql/schema.py", line 45, in execute
#     return super().execute(sql, params)
#            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/base/schema.py", line 204, in execute
#     cursor.execute(sql, params)
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 122, in execute
#     return super().execute(sql, params)
#            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 79, in execute
#     return self._execute_with_wrappers(
#            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
#     return executor(sql, params, many, context)
#            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 100, in _execute
#     with self.db.wrap_database_errors:
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/utils.py", line 91, in __exit__
#     raise dj_exc_value.with_traceback(traceback) from exc_value
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 103, in _execute
#     return self.cursor.execute(sql)
#            ^^^^^^^^^^^^^^^^^^^^^^^^
# django.db.utils.ProgrammingError: ERREUR:  droit refusé pour le schéma public
# LINE 1: CREATE TABLE "django_migrations" ("id" bigint NOT NULL PRIMA...
#                      ^


# During handling of the above exception, another exception occurred:

# Traceback (most recent call last):
#   File "/home/lanfial/backendsupply/manage.py", line 22, in <module>
#     main()
#   File "/home/lanfial/backendsupply/manage.py", line 18, in main
#     execute_from_command_line(sys.argv)
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/__init__.py", line 442, in execute_from_command_line
#     utility.execute()
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/__init__.py", line 436, in execute
#     self.fetch_command(subcommand).run_from_argv(self.argv)
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/base.py", line 416, in run_from_argv
#     self.execute(*args, **cmd_options)
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/base.py", line 460, in execute
#     output = self.handle(*args, **options)
#              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/base.py", line 107, in wrapper
#     res = handle_func(*args, **kwargs)
#           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/commands/migrate.py", line 353, in handle
#     post_migrate_state = executor.migrate(
#                          ^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/migrations/executor.py", line 107, in migrate
#     self.recorder.ensure_schema()
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/migrations/recorder.py", line 80, in ensure_schema
#     raise MigrationSchemaMissing(
# django.db.migrations.exceptions.MigrationSchemaMissing: Unable to create the django_migrations table (ERREUR:  droit refusé pour le schéma public
# LINE 1: CREATE TABLE "django_migrations" ("id" bigint NOT NULL PRIMA...
#                      ^
# )
# (venv) lanfial@vps114686:~/backendsupply$ python manage.py migrate
# Operations to perform:
#   Apply all migrations: admin, api, auth, contenttypes, sessions
# Running migrations:
# Traceback (most recent call last):
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 103, in _execute
#     return self.cursor.execute(sql)
#            ^^^^^^^^^^^^^^^^^^^^^^^^
# psycopg2.errors.InsufficientPrivilege: ERREUR:  droit refusé pour le schéma public
# LINE 1: CREATE TABLE "django_migrations" ("id" bigint NOT NULL PRIMA...
#                      ^


# The above exception was the direct cause of the following exception:

# Traceback (most recent call last):
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/migrations/recorder.py", line 78, in ensure_schema
#     editor.create_model(self.Migration)
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/base/schema.py", line 512, in create_model
#     self.execute(sql, params or None)
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/postgresql/schema.py", line 45, in execute
#     return super().execute(sql, params)
#            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/base/schema.py", line 204, in execute
#     cursor.execute(sql, params)
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 122, in execute
#     return super().execute(sql, params)
#            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 79, in execute
#     return self._execute_with_wrappers(
#            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
#     return executor(sql, params, many, context)
#            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 100, in _execute
#     with self.db.wrap_database_errors:
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/utils.py", line 91, in __exit__
#     raise dj_exc_value.with_traceback(traceback) from exc_value
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 103, in _execute
#     return self.cursor.execute(sql)
#            ^^^^^^^^^^^^^^^^^^^^^^^^
# django.db.utils.ProgrammingError: ERREUR:  droit refusé pour le schéma public
# LINE 1: CREATE TABLE "django_migrations" ("id" bigint NOT NULL PRIMA...
#                      ^


# During handling of the above exception, another exception occurred:

# Traceback (most recent call last):
#   File "/home/lanfial/backendsupply/manage.py", line 22, in <module>
#     main()
#   File "/home/lanfial/backendsupply/manage.py", line 18, in main
#     execute_from_command_line(sys.argv)
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/__init__.py", line 442, in execute_from_command_line
#     utility.execute()
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/__init__.py", line 436, in execute
#     self.fetch_command(subcommand).run_from_argv(self.argv)
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/base.py", line 416, in run_from_argv
#     self.execute(*args, **cmd_options)
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/base.py", line 460, in execute
#     output = self.handle(*args, **options)
#              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/base.py", line 107, in wrapper
#     res = handle_func(*args, **kwargs)
#           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/commands/migrate.py", line 353, in handle
#     post_migrate_state = executor.migrate(
#                          ^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/migrations/executor.py", line 107, in migrate
#     self.recorder.ensure_schema()
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/migrations/recorder.py", line 80, in ensure_schema
#     raise MigrationSchemaMissing(
# django.db.migrations.exceptions.MigrationSchemaMissing: Unable to create the django_migrations table (ERREUR:  droit refusé pour le schéma public
# LINE 1: CREATE TABLE "django_migrations" ("id" bigint NOT NULL PRIMA...
#                      ^
# )
# (venv) lanfial@vps114686:~/backendsupply$ sudo -u postgres psql
# could not change directory to "/home/lanfial/backendsupply": Permission non accordée
# psql (15.14 (Debian 15.14-0+deb12u1))
# Type "help" for help.

# postgres=# sudo -u root
# postgres-# exit
# Use \q to quit.
# postgres-# exit
# Use \q to quit.
# postgres-# \q
# (venv) lanfial@vps114686:~/backendsupply$ 
# (venv) lanfial@vps114686:~/backendsupply$ sudo -u postgres psql
# could not change directory to "/home/lanfial/backendsupply": Permission non accordée
# psql (15.14 (Debian 15.14-0+deb12u1))
# Type "help" for help.

# postgres=# exit
# (venv) lanfial@vps114686:~/backendsupply$ sudo -u postgres psql
# could not change directory to "/home/lanfial/backendsupply": Permission non accordée
# psql (15.14 (Debian 15.14-0+deb12u1))
# Type "help" for help.

# postgres=# GRANT ALL PRIVILEGES ON DATABASE lanfialink_db TO lanfialink_user;
# GRANT
# postgres=# GRANT USAGE, CREATE ON SCHEMA public TO lanfialink_user;
# GRANT
# postgres=# GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO lanfialink_user;
# GRANT
# postgres=# GRANT ALL PRIVILEGES ON ALL SEQUENCES IN SCHEMA public TO lanfialink_user;
# GRANT
# postgres=# GRANT ALL PRIVILEGES ON ALL FUNCTIONS IN SCHEMA public TO lanfialink_user;
# GRANT
# postgres=# ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT ALL ON TABLES TO lanfialink_user;
# ALTER DEFAULT PRIVILEGES
# postgres=# ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT ALL ON SEQUENCES TO lanfialink_user;
# ALTER DEFAULT PRIVILEGES
# postgres=# ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT ALL ON FUNCTIONS TO lanfialink_user;
# ALTER DEFAULT PRIVILEGES
# postgres=# ALTER USER lanfialink_user CREATEDB;
# ALTER ROLE
# postgres=# \q
# (venv) lanfial@vps114686:~/backendsupply$ ls
# api  db.sqlite3  lanfiatect  manage.py  media  Procfile  requirements.txt  seed_data.py  venv
# (venv) lanfial@vps114686:~/backendsupply$ python manage.py migrate
# Operations to perform:
#   Apply all migrations: admin, api, auth, contenttypes, sessions
# Running migrations:
# Traceback (most recent call last):
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 103, in _execute
#     return self.cursor.execute(sql)
#            ^^^^^^^^^^^^^^^^^^^^^^^^
# psycopg2.errors.InsufficientPrivilege: ERREUR:  droit refusé pour le schéma public
# LINE 1: CREATE TABLE "django_migrations" ("id" bigint NOT NULL PRIMA...
#                      ^


# The above exception was the direct cause of the following exception:

# Traceback (most recent call last):
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/migrations/recorder.py", line 78, in ensure_schema
#     editor.create_model(self.Migration)
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/base/schema.py", line 512, in create_model
#     self.execute(sql, params or None)
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/postgresql/schema.py", line 45, in execute
#     return super().execute(sql, params)
#            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/base/schema.py", line 204, in execute
#     cursor.execute(sql, params)
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 122, in execute
#     return super().execute(sql, params)
#            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 79, in execute
#     return self._execute_with_wrappers(
#            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
#     return executor(sql, params, many, context)
#            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 100, in _execute
#     with self.db.wrap_database_errors:
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/utils.py", line 91, in __exit__
#     raise dj_exc_value.with_traceback(traceback) from exc_value
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 103, in _execute
#     return self.cursor.execute(sql)
#            ^^^^^^^^^^^^^^^^^^^^^^^^
# django.db.utils.ProgrammingError: ERREUR:  droit refusé pour le schéma public
# LINE 1: CREATE TABLE "django_migrations" ("id" bigint NOT NULL PRIMA...
#                      ^


# During handling of the above exception, another exception occurred:

# Traceback (most recent call last):
#   File "/home/lanfial/backendsupply/manage.py", line 22, in <module>
#     main()
#   File "/home/lanfial/backendsupply/manage.py", line 18, in main
#     execute_from_command_line(sys.argv)
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/__init__.py", line 442, in execute_from_command_line
#     utility.execute()
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/__init__.py", line 436, in execute
#     self.fetch_command(subcommand).run_from_argv(self.argv)
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/base.py", line 416, in run_from_argv
#     self.execute(*args, **cmd_options)
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/base.py", line 460, in execute
#     output = self.handle(*args, **options)
#              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/base.py", line 107, in wrapper
#     res = handle_func(*args, **kwargs)
#           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/core/management/commands/migrate.py", line 353, in handle
#     post_migrate_state = executor.migrate(
#                          ^^^^^^^^^^^^^^^^^
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/migrations/executor.py", line 107, in migrate
#     self.recorder.ensure_schema()
#   File "/home/lanfial/backendsupply/venv/lib/python3.11/site-packages/django/db/migrations/recorder.py", line 80, in ensure_schema
#     raise MigrationSchemaMissing(
# django.db.migrations.exceptions.MigrationSchemaMissing: Unable to create the django_migrations table (ERREUR:  droit refusé pour le schéma public
# LINE 1: CREATE TABLE "django_migrations" ("id" bigint NOT NULL PRIMA...
#                      ^
# )
# (venv) lanfial@vps114686:~/backendsupply$ ls
# api  db.sqlite3  lanfiatect  manage.py  media  Procfile  requirements.txt  seed_data.py  venv
# (venv) lanfial@vps114686:~/backendsupply$ cd lanfiatect/
# (venv) lanfial@vps114686:~/backendsupply/lanfiatect$ ls
# asgi.py  __init__.py  __pycache__  settings.py  urls.py  wsgi.py
# (venv) lanfial@vps114686:~/backendsupply/lanfiatect$ sudo nano settings.py 
# (venv) lanfial@vps114686:~/backendsupply/lanfiatect$ sudo -u postgres psql
# could not change directory to "/home/lanfial/backendsupply/lanfiatect": Permission non accordée
# psql (15.14 (Debian 15.14-0+deb12u1))
# Type "help" for help.

# postgres=# GRANT ALL PRIVILEGES ON DATABASE lanfialink_db TO lanfialink_user;
# GRANT
# postgres=# ALTER DATABASE lanfialink_db OWNER TO lanfialink_user;
# ALTER DATABASE
# postgres=# GRANT ALL ON SCHEMA public TO lanfialink_user;
# GRANT
# postgres=# ALTER SCHEMA public OWNER TO lanfialink_user;
# ALTER SCHEMA
# postgres=# \q
# (venv) lanfial@vps114686:~/backendsupply/lanfiatect$ cd ..
# (venv) lanfial@vps114686:~/backendsupply$ ls
# api  db.sqlite3  lanfiatect  manage.py  media  Procfile  requirements.txt  seed_data.py  venv
# (venv) lanfial@vps114686:~/backendsupply$ cd lanfiatect/
# (venv) lanfial@vps114686:~/backendsupply/lanfiatect$ cd ..
# (venv) lanfial@vps114686:~/backendsupply$ ls
# api  db.sqlite3  lanfiatect  manage.py  media  Procfile  requirements.txt  seed_data.py  venv
# (venv) lanfial@vps114686:~/backendsupply$ cd ..
# (venv) lanfial@vps114686:~$ cd backendsupply/
# (venv) lanfial@vps114686:~/backendsupply$ cd lanfiatect/
# (venv) lanfial@vps114686:~/backendsupply/lanfiatect$ ls
# asgi.py  __init__.py  __pycache__  settings.py  urls.py  wsgi.py
# (venv) lanfial@vps114686:~/backendsupply/lanfiatect$ sudo nano settings.py
# (venv) lanfial@vps114686:~/backendsupply/lanfiatect$ ls
# asgi.py  __init__.py  __pycache__  settings.py  urls.py  wsgi.py
# (venv) lanfial@vps114686:~/backendsupply/lanfiatect$ cd ..
# (venv) lanfial@vps114686:~/backendsupply$ ls
# api  db.sqlite3  lanfiatect  manage.py  media  Procfile  requirements.txt  seed_data.py  venv
# (venv) lanfial@vps114686:~/backendsupply$ python manage.py migrate
# Operations to perform:
#   Apply all migrations: admin, api, auth, contenttypes, sessions
# Running migrations:
#   Applying contenttypes.0001_initial... OK
#   Applying auth.0001_initial... OK
#   Applying admin.0001_initial... OK
#   Applying admin.0002_logentry_remove_auto_add... OK
#   Applying admin.0003_logentry_add_action_flag_choices... OK
#   Applying api.0001_initial... OK
#   Applying contenttypes.0002_remove_content_type_name... OK
#   Applying auth.0002_alter_permission_name_max_length... OK
#   Applying auth.0003_alter_user_email_max_length... OK
#   Applying auth.0004_alter_user_username_opts... OK
#   Applying auth.0005_alter_user_last_login_null... OK
#   Applying auth.0006_require_contenttypes_0002... OK
#   Applying auth.0007_alter_validators_add_error_messages... OK
#   Applying auth.0008_alter_user_username_max_length... OK
#   Applying auth.0009_alter_user_last_name_max_length... OK
#   Applying auth.0010_alter_group_name_max_length... OK
#   Applying auth.0011_update_proxy_permissions... OK
#   Applying auth.0012_alter_user_first_name_max_length... OK
#   Applying sessions.0001_initial... OK
# (venv) lanfial@vps114686:~/backendsupply$ python manage.py collectstatic

# 163 static files copied to '/home/lanfial/backendsupply/staticfiles'.
# (venv) lanfial@vps114686:~/backendsupply$ python manage.py createsuperuser
# Username (leave blank to use 'lanfial'): issa
# Email address: issa@gmail.com
# Password: 
# Password (again): 
# The password is too similar to the username.
# This password is too short. It must contain at least 8 characters.
# Bypass password validation and create user anyway? [y/N]: y
# Superuser created successfully.
# (venv) lanfial@vps114686:~/backendsupply$ sudo nano /etc/systemd/system/lanfial.service
# (venv) lanfial@vps114686:~/backendsupply$ sudo systemctl daemon-reload
# (venv) lanfial@vps114686:~/backendsupply$ sudo systemctl start lanfial
# (venv) lanfial@vps114686:~/backendsupply$ sudo systemctl enable lanfial
# Created symlink /etc/systemd/system/multi-user.target.wants/lanfial.service → /etc/systemd/system/lanfial.service.
# (venv) lanfial@vps114686:~/backendsupply$ sudo systemctl status lanfia
# ● lanfia.service - Gunicorn instance pour Lanfia API
#      Loaded: loaded (/etc/systemd/system/lanfia.service; enabled; preset: enabled)
#     Drop-In: /run/systemd/system/service.d
#              └─zzz-lxc-service.conf
#      Active: active (running) since Sun 2025-10-19 17:41:16 CEST; 1 week 6 days ago
#    Main PID: 387502 (gunicorn)
#       Tasks: 37 (limit: 3412)
#      Memory: 418.9M
#         CPU: 17min 3.805s
#      CGroup: /system.slice/lanfia.service
#              ├─387502 /home/lanfia/backendsupply/venv/bin/python3 /home/lanfia/backendsupply/venv/bin/gunicorn --workers 3 --bind 127.0.0.1:8000 lanfiatect.wsgi:application
#              ├─669999 /home/lanfia/backendsupply/venv/bin/python3 /home/lanfia/backendsupply/venv/bin/gunicorn --workers 3 --bind 127.0.0.1:8000 lanfiatect.wsgi:application
#              ├─670244 /home/lanfia/backendsupply/venv/bin/python3 /home/lanfia/backendsupply/venv/bin/gunicorn --workers 3 --bind 127.0.0.1:8000 lanfiatect.wsgi:application
#              └─670698 /home/lanfia/backendsupply/venv/bin/python3 /home/lanfia/backendsupply/venv/bin/gunicorn --workers 3 --bind 127.0.0.1:8000 lanfiatect.wsgi:application

# nov. 01 12:52:45 vps114686 gunicorn[669999]: Issssssssa
# nov. 01 12:52:45 vps114686 gunicorn[669999]: maman
# nov. 01 12:52:45 vps114686 gunicorn[669999]: Narcisse Irahou (FrieslandCampina)
# nov. 01 12:52:45 vps114686 gunicorn[669999]: papa
# nov. 01 12:52:45 vps114686 gunicorn[669999]: <QuerySet [<VendorActivity: Narcisse Irahou - 53 - Réapprovisionnement - 2025-10-31>, <VendorActivity: Narcisse Irahou - 51 - Réapprovisionnement - 2025-10-29>, <Vendo>
# nov. 01 12:52:45 vps114686 gunicorn[669999]: maman
# nov. 01 12:52:45 vps114686 gunicorn[669999]: Issssssssa
# nov. 01 12:52:45 vps114686 gunicorn[669999]: maman
# nov. 01 12:52:45 vps114686 gunicorn[669999]: Narcisse Irahou (FrieslandCampina)
# nov. 01 12:52:45 vps114686 gunicorn[669999]: papa
# lines 1-25/25 (END)
# (venv) lanfial@vps114686:~/backendsupply$ sudo systemctl status lanfial
# ● lanfial.service - Gunicorn instance pour Lanfia API
#      Loaded: loaded (/etc/systemd/system/lanfial.service; enabled; preset: enabled)
#     Drop-In: /run/systemd/system/service.d
#              └─zzz-lxc-service.conf
#      Active: activating (auto-restart) (Result: exit-code) since Sun 2025-11-02 14:40:36 CET; 676ms ago
#     Process: 722236 ExecStart=/home/lanfial/backendsupply/venv/bin/gunicorn --workers 3 --bind 127.0.0.1:8000 lanfiatect.wsgi:application (code=exited, status=1/FAILURE)
#    Main PID: 722236 (code=exited, status=1/FAILURE)
#         CPU: 170ms
# (venv) lanfial@vps114686:~/backendsupply$ 
# (venv) lanfial@vps114686:~/backendsupply$ sudo systemctl status lanfial
# ● lanfial.service - Gunicorn instance pour Lanfia API
#      Loaded: loaded (/etc/systemd/system/lanfial.service; enabled; preset: enabled)
#     Drop-In: /run/systemd/system/service.d
#              └─zzz-lxc-service.conf
#      Active: activating (auto-restart) (Result: exit-code) since Sun 2025-11-02 14:44:52 CET; 1s ago
#     Process: 722338 ExecStart=/home/lanfial/backendsupply/venv/bin/gunicorn --workers 3 --bind 127.0.0.1:8000 lanfiatect.wsgi:application (code=exited, status=1/FAILURE)
#    Main PID: 722338 (code=exited, status=1/FAILURE)
#         CPU: 168ms
# (venv) lanfial@vps114686:~/backendsupply$ sudo journalctl -u lanfial.service -f
# nov. 02 14:45:16 vps114686 systemd[1]: lanfial.service: Main process exited, code=exited, status=1/FAILURE
# nov. 02 14:45:16 vps114686 systemd[1]: lanfial.service: Failed with result 'exit-code'.
# nov. 02 14:45:19 vps114686 systemd[1]: lanfial.service: Scheduled restart job, restart counter is at 37.
# nov. 02 14:45:19 vps114686 systemd[1]: Stopped lanfial.service - Gunicorn instance pour Lanfia API.
# nov. 02 14:45:19 vps114686 systemd[1]: Started lanfial.service - Gunicorn instance pour Lanfia API.
# nov. 02 14:45:19 vps114686 gunicorn[722349]: [2025-11-02 14:45:19 +0100] [722349] [INFO] Starting gunicorn 23.0.0
# nov. 02 14:45:19 vps114686 gunicorn[722349]: [2025-11-02 14:45:19 +0100] [722349] [ERROR] Connection in use: ('127.0.0.1', 8000)
# nov. 02 14:45:19 vps114686 gunicorn[722349]: [2025-11-02 14:45:19 +0100] [722349] [ERROR] connection to ('127.0.0.1', 8000) failed: [Errno 98] Address already in use
# nov. 02 14:45:20 vps114686 gunicorn[722349]: [2025-11-02 14:45:20 +0100] [722349] [ERROR] Connection in use: ('127.0.0.1', 8000)
# nov. 02 14:45:20 vps114686 gunicorn[722349]: [2025-11-02 14:45:20 +0100] [722349] [ERROR] connection to ('127.0.0.1', 8000) failed: [Errno 98] Address already in use
# nov. 02 14:45:21 vps114686 gunicorn[722349]: [2025-11-02 14:45:21 +0100] [722349] [ERROR] Connection in use: ('127.0.0.1', 8000)
# nov. 02 14:45:21 vps114686 gunicorn[722349]: [2025-11-02 14:45:21 +0100] [722349] [ERROR] connection to ('127.0.0.1', 8000) failed: [Errno 98] Address already in use
# nov. 02 14:45:22 vps114686 gunicorn[722349]: [2025-11-02 14:45:22 +0100] [722349] [ERROR] Connection in use: ('127.0.0.1', 8000)
# nov. 02 14:45:22 vps114686 gunicorn[722349]: [2025-11-02 14:45:22 +0100] [722349] [ERROR] connection to ('127.0.0.1', 8000) failed: [Errno 98] Address already in use
# nov. 02 14:45:23 vps114686 gunicorn[722349]: [2025-11-02 14:45:23 +0100] [722349] [ERROR] Connection in use: ('127.0.0.1', 8000)
# nov. 02 14:45:23 vps114686 gunicorn[722349]: [2025-11-02 14:45:23 +0100] [722349] [ERROR] connection to ('127.0.0.1', 8000) failed: [Errno 98] Address already in use
# nov. 02 14:45:24 vps114686 gunicorn[722349]: [2025-11-02 14:45:24 +0100] [722349] [ERROR] Can't connect to ('127.0.0.1', 8000)
# nov. 02 14:45:25 vps114686 systemd[1]: lanfial.service: Main process exited, code=exited, status=1/FAILURE
# nov. 02 14:45:25 vps114686 systemd[1]: lanfial.service: Failed with result 'exit-code'.
# nov. 02 14:45:28 vps114686 systemd[1]: lanfial.service: Scheduled restart job, restart counter is at 38.
# nov. 02 14:45:28 vps114686 systemd[1]: Stopped lanfial.service - Gunicorn instance pour Lanfia API.
# nov. 02 14:45:28 vps114686 systemd[1]: Started lanfial.service - Gunicorn instance pour Lanfia API.
# nov. 02 14:45:28 vps114686 gunicorn[722354]: [2025-11-02 14:45:28 +0100] [722354] [INFO] Starting gunicorn 23.0.0
# nov. 02 14:45:28 vps114686 gunicorn[722354]: [2025-11-02 14:45:28 +0100] [722354] [ERROR] Connection in use: ('127.0.0.1', 8000)
# nov. 02 14:45:28 vps114686 gunicorn[722354]: [2025-11-02 14:45:28 +0100] [722354] [ERROR] connection to ('127.0.0.1', 8000) failed: [Errno 98] Address already in use
# nov. 02 14:45:29 vps114686 gunicorn[722354]: [2025-11-02 14:45:29 +0100] [722354] [ERROR] Connection in use: ('127.0.0.1', 8000)
# nov. 02 14:45:29 vps114686 gunicorn[722354]: [2025-11-02 14:45:29 +0100] [722354] [ERROR] connection to ('127.0.0.1', 8000) failed: [Errno 98] Address already in use
# nov. 02 14:45:30 vps114686 gunicorn[722354]: [2025-11-02 14:45:30 +0100] [722354] [ERROR] Connection in use: ('127.0.0.1', 8000)
# nov. 02 14:45:30 vps114686 gunicorn[722354]: [2025-11-02 14:45:30 +0100] [722354] [ERROR] connection to ('127.0.0.1', 8000) failed: [Errno 98] Address already in use
# nov. 02 14:45:31 vps114686 gunicorn[722354]: [2025-11-02 14:45:31 +0100] [722354] [ERROR] Connection in use: ('127.0.0.1', 8000)
# nov. 02 14:45:31 vps114686 gunicorn[722354]: [2025-11-02 14:45:31 +0100] [722354] [ERROR] connection to ('127.0.0.1', 8000) failed: [Errno 98] Address already in use
# nov. 02 14:45:32 vps114686 gunicorn[722354]: [2025-11-02 14:45:32 +0100] [722354] [ERROR] Connection in use: ('127.0.0.1', 8000)
# nov. 02 14:45:32 vps114686 gunicorn[722354]: [2025-11-02 14:45:32 +0100] [722354] [ERROR] connection to ('127.0.0.1', 8000) failed: [Errno 98] Address already in use
# nov. 02 14:45:33 vps114686 gunicorn[722354]: [2025-11-02 14:45:33 +0100] [722354] [ERROR] Can't connect to ('127.0.0.1', 8000)
# nov. 02 14:45:33 vps114686 systemd[1]: lanfial.service: Main process exited, code=exited, status=1/FAILURE
# nov. 02 14:45:33 vps114686 systemd[1]: lanfial.service: Failed with result 'exit-code'.
# nov. 02 14:45:36 vps114686 systemd[1]: lanfial.service: Scheduled restart job, restart counter is at 39.
# nov. 02 14:45:36 vps114686 systemd[1]: Stopped lanfial.service - Gunicorn instance pour Lanfia API.
# nov. 02 14:45:36 vps114686 systemd[1]: Started lanfial.service - Gunicorn instance pour Lanfia API.
# nov. 02 14:45:36 vps114686 gunicorn[722357]: [2025-11-02 14:45:36 +0100] [722357] [INFO] Starting gunicorn 23.0.0
# nov. 02 14:45:36 vps114686 gunicorn[722357]: [2025-11-02 14:45:36 +0100] [722357] [ERROR] Connection in use: ('127.0.0.1', 8000)
# nov. 02 14:45:36 vps114686 gunicorn[722357]: [2025-11-02 14:45:36 +0100] [722357] [ERROR] connection to ('127.0.0.1', 8000) failed: [Errno 98] Address already in use
# nov. 02 14:45:37 vps114686 gunicorn[722357]: [2025-11-02 14:45:37 +0100] [722357] [ERROR] Connection in use: ('127.0.0.1', 8000)
# nov. 02 14:45:37 vps114686 gunicorn[722357]: [2025-11-02 14:45:37 +0100] [722357] [ERROR] connection to ('127.0.0.1', 8000) failed: [Errno 98] Address already in use
# ^C
# (venv) lanfial@vps114686:~/backendsupply$ ^C
# (venv) lanfial@vps114686:~/backendsupply$ sudo nano /etc/systemd/system/lanfial.service
# (venv) lanfial@vps114686:~/backendsupply$ sudo systemctl daemon-reload
# (venv) lanfial@vps114686:~/backendsupply$ sudo systemctl start lanfial
# (venv) lanfial@vps114686:~/backendsupply$ sudo systemctl enable lanfial
# (venv) lanfial@vps114686:~/backendsupply$ sudo systemctl status lanfial
# ● lanfial.service - Gunicorn instance pour Lanfia API
#      Loaded: loaded (/etc/systemd/system/lanfial.service; enabled; preset: enabled)
#     Drop-In: /run/systemd/system/service.d
#              └─zzz-lxc-service.conf
#      Active: active (running) since Sun 2025-11-02 14:47:40 CET; 19s ago
#    Main PID: 722496 (gunicorn)
#       Tasks: 4 (limit: 3412)
#      Memory: 118.5M
#         CPU: 941ms
#      CGroup: /system.slice/lanfial.service
#              ├─722496 /home/lanfial/backendsupply/venv/bin/python3 /home/lanfial/backendsupply/venv/bin/gunicorn --workers 3 --bind 127.0.0.1:8001 lanfiatect.wsgi:application
#              ├─722497 /home/lanfial/backendsupply/venv/bin/python3 /home/lanfial/backendsupply/venv/bin/gunicorn --workers 3 --bind 127.0.0.1:8001 lanfiatect.wsgi:application
#              ├─722498 /home/lanfial/backendsupply/venv/bin/python3 /home/lanfial/backendsupply/venv/bin/gunicorn --workers 3 --bind 127.0.0.1:8001 lanfiatect.wsgi:application
#              └─722499 /home/lanfial/backendsupply/venv/bin/python3 /home/lanfial/backendsupply/venv/bin/gunicorn --workers 3 --bind 127.0.0.1:8001 lanfiatect.wsgi:application

# nov. 02 14:47:40 vps114686 systemd[1]: Started lanfial.service - Gunicorn instance pour Lanfia API.
# nov. 02 14:47:40 vps114686 gunicorn[722496]: [2025-11-02 14:47:40 +0100] [722496] [INFO] Starting gunicorn 23.0.0
# nov. 02 14:47:40 vps114686 gunicorn[722496]: [2025-11-02 14:47:40 +0100] [722496] [INFO] Listening at: http://127.0.0.1:8001 (722496)
# nov. 02 14:47:40 vps114686 gunicorn[722496]: [2025-11-02 14:47:40 +0100] [722496] [INFO] Using worker: sync
# nov. 02 14:47:40 vps114686 gunicorn[722497]: [2025-11-02 14:47:40 +0100] [722497] [INFO] Booting worker with pid: 722497
# nov. 02 14:47:40 vps114686 gunicorn[722498]: [2025-11-02 14:47:40 +0100] [722498] [INFO] Booting worker with pid: 722498
# nov. 02 14:47:40 vps114686 gunicorn[722499]: [2025-11-02 14:47:40 +0100] [722499] [INFO] Booting worker with pid: 722499
# (venv) lanfial@vps114686:~/backendsupply$ Read from remote host 185.98.139.209: Connection reset by peer
# Connection to 185.98.139.209 closed.
# client_loop: send disconnect: Broken pipe
# ouedraogoissa@MacBook-Pro-de-OUEDRAOGO ~ % ssh root@185.98.139.209
# root@185.98.139.209's password: 

# ouedraogoissa@MacBook-Pro-de-OUEDRAOGO ~ % 
# ouedraogoissa@MacBook-Pro-de-OUEDRAOGO ~ % ssh lanfial@185.98.139.209
# lanfial@185.98.139.209's password: 
# Linux vps114686 6.12.38+deb13-amd64 #1 SMP PREEMPT_DYNAMIC Debian 6.12.38-1 (2025-07-16) x86_64

# The programs included with the Debian GNU/Linux system are free software;
# the exact distribution terms for each program are described in the
# individual files in /usr/share/doc/*/copyright.

# Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
# permitted by applicable law.
# Last login: Sun Nov  2 13:30:02 2025 from 102.67.255.129
# lanfial@vps114686:~$ ls
# backendsupply
# lanfial@vps114686:~$ cd backendsupply/
# lanfial@vps114686:~/backendsupply$ source venv/bin/activate
# (venv) lanfial@vps114686:~/backendsupply$ ls
# Procfile  api  db.sqlite3  lanfiatect  manage.py  media  requirements.txt  seed_data.py  staticfiles  venv
# (venv) lanfial@vps114686:~/backendsupply$ sudo systemctl status lanfial
# [sudo] password for lanfial: 
# ● lanfial.service - Gunicorn instance pour Lanfia API
#      Loaded: loaded (/etc/systemd/system/lanfial.service; enabled; preset: enabled)
#     Drop-In: /run/systemd/system/service.d
#              └─zzz-lxc-service.conf
#      Active: active (running) since Sun 2025-11-02 14:47:40 CET; 2h 1min ago
#    Main PID: 722496 (gunicorn)
#       Tasks: 4 (limit: 3412)
#      Memory: 118.5M
#         CPU: 2.359s
#      CGroup: /system.slice/lanfial.service
#              ├─722496 /home/lanfial/backendsupply/venv/bin/python3 /home/lanfial/backendsupply/venv/bin/gunicorn --workers 3 --bind 127.0.0.1:8001 lanfiatect.wsgi:application
#              ├─722497 /home/lanfial/backendsupply/venv/bin/python3 /home/lanfial/backendsupply/venv/bin/gunicorn --workers 3 --bind 127.0.0.1:8001 lanfiatect.wsgi:application
#              ├─722498 /home/lanfial/backendsupply/venv/bin/python3 /home/lanfial/backendsupply/venv/bin/gunicorn --workers 3 --bind 127.0.0.1:8001 lanfiatect.wsgi:application
#              └─722499 /home/lanfial/backendsupply/venv/bin/python3 /home/lanfial/backendsupply/venv/bin/gunicorn --workers 3 --bind 127.0.0.1:8001 lanfiatect.wsgi:application

# Nov 02 14:47:40 vps114686 systemd[1]: Started lanfial.service - Gunicorn instance pour Lanfia API.
# Nov 02 14:47:40 vps114686 gunicorn[722496]: [2025-11-02 14:47:40 +0100] [722496] [INFO] Starting gunicorn 23.0.0
# Nov 02 14:47:40 vps114686 gunicorn[722496]: [2025-11-02 14:47:40 +0100] [722496] [INFO] Listening at: http://127.0.0.1:8001 (722496)
# Nov 02 14:47:40 vps114686 gunicorn[722496]: [2025-11-02 14:47:40 +0100] [722496] [INFO] Using worker: sync
# Nov 02 14:47:40 vps114686 gunicorn[722497]: [2025-11-02 14:47:40 +0100] [722497] [INFO] Booting worker with pid: 722497
# Nov 02 14:47:40 vps114686 gunicorn[722498]: [2025-11-02 14:47:40 +0100] [722498] [INFO] Booting worker with pid: 722498
# Nov 02 14:47:40 vps114686 gunicorn[722499]: [2025-11-02 14:47:40 +0100] [722499] [INFO] Booting worker with pid: 722499
# (venv) lanfial@vps114686:~/backendsupply$ sudo nano /etc/nginx/sites-available/lanfialink-backend
# (venv) lanfial@vps114686:~/backendsupply$ cd /etc/nginx/sites-enabled/
# (venv) lanfial@vps114686:/etc/nginx/sites-enabled$ ls
# lanfia-backend  lanfia-frontend
# (venv) lanfial@vps114686:/etc/nginx/sites-enabled$ sudo ln -s /etc/nginx/sites-available/lanfialink-backend /etc/nginx/sites-enabled/
# (venv) lanfial@vps114686:/etc/nginx/sites-enabled$ sudo nginx -t
# 2025/11/02 17:03:07 [emerg] 724997#724997: cannot load certificate "/etc/letsencrypt/live/api.lanfialink.com/fullchain.pem": BIO_new_file() failed (SSL: error:80000002:system library::No such file or directory:calling fopen(/etc/letsencrypt/live/api.lanfialink.com/fullchain.pem, r) error:10000080:BIO routines::no such file)
# nginx: configuration file /etc/nginx/nginx.conf test failed
# (venv) lanfial@vps114686:/etc/nginx/sites-enabled$ cd ..
# (venv) lanfial@vps114686:/etc/nginx$ ls
# conf.d  fastcgi.conf  fastcgi_params  koi-utf  koi-win  mime.types  modules-available  modules-enabled  nginx.conf  proxy_params  scgi_params  sites-available  sites-enabled  snippets  uwsgi_params  win-utf
# (venv) lanfial@vps114686:/etc/nginx$ sudo nano nginx.conf
# (venv) lanfial@vps114686:/etc/nginx$ cd sites-enabled/
# (venv) lanfial@vps114686:/etc/nginx/sites-enabled$ ls
# lanfia-backend  lanfia-frontend  lanfialink-backend
# (venv) lanfial@vps114686:/etc/nginx/sites-enabled$ ls
# lanfia-backend  lanfia-frontend  lanfialink-backend
# (venv) lanfial@vps114686:/etc/nginx/sites-enabled$ 
# (venv) lanfial@vps114686:/etc/nginx/sites-enabled$ sudo nano lanfialink-backend
# (venv) lanfial@vps114686:/etc/nginx/sites-enabled$ sudo certbot --nginx -d api.lanfialink.com
# Saving debug log to /var/log/letsencrypt/letsencrypt.log
# Error while running nginx -c /etc/nginx/nginx.conf -t.

# 2025/11/02 17:12:41 [emerg] 725199#725199: cannot load certificate "/etc/letsencrypt/live/api.lanfialink.com/fullchain.pem": BIO_new_file() failed (SSL: error:80000002:system library::No such file or directory:calling fopen(/etc/letsencrypt/live/api.lanfialink.com/fullchain.pem, r) error:10000080:BIO routines::no such file)
# nginx: configuration file /etc/nginx/nginx.conf test failed

# The nginx plugin is not working; there may be problems with your existing configuration.
# The error was: MisconfigurationError('Error while running nginx -c /etc/nginx/nginx.conf -t.\n\n2025/11/02 17:12:41 [emerg] 725199#725199: cannot load certificate "/etc/letsencrypt/live/api.lanfialink.com/fullchain.pem": BIO_new_file() failed (SSL: error:80000002:system library::No such file or directory:calling fopen(/etc/letsencrypt/live/api.lanfialink.com/fullchain.pem, r) error:10000080:BIO routines::no such file)\nnginx: configuration file /etc/nginx/nginx.conf test failed\n')
# (venv) lanfial@vps114686:/etc/nginx/sites-enabled$ sudo nano /etc/nginx/sites-available/lanfialink-backend
# (venv) lanfial@vps114686:/etc/nginx/sites-enabled$ sudo nginx -t
# nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
# nginx: configuration file /etc/nginx/nginx.conf test is successful
# (venv) lanfial@vps114686:/etc/nginx/sites-enabled$ sudo systemctl reload nginx
# (venv) lanfial@vps114686:/etc/nginx/sites-enabled$ sudo certbot --nginx -d api.lanfialink.com
# Saving debug log to /var/log/letsencrypt/letsencrypt.log
# Requesting a certificate for api.lanfialink.com

# Certbot failed to authenticate some domains (authenticator: nginx). The Certificate Authority reported these problems:
#   Domain: api.lanfialink.com
#   Type:   dns
#   Detail: DNS problem: NXDOMAIN looking up A for api.lanfialink.com - check that a DNS record exists for this domain; DNS problem: NXDOMAIN looking up AAAA for api.lanfialink.com - check that a DNS record exists for this domain

# Hint: The Certificate Authority failed to verify the temporary nginx configuration changes made by Certbot. Ensure the listed domains point to this nginx server and that it is accessible from the internet.

# Some challenges have failed.
# Ask for help or search for solutions at https://community.letsencrypt.org. See the logfile /var/log/letsencrypt/letsencrypt.log or re-run Certbot with -v for more details.
# (venv) lanfial@vps114686:/etc/nginx/sites-enabled$ Read from remote host 185.98.139.209: Connection reset by peer
# Connection to 185.98.139.209 closed.
# client_loop: send disconnect: Broken pipe
# ouedraogoissa@MacBook-Pro-de-OUEDRAOGO ~ % ssh lanfial@185.98.139.209
# lanfial@185.98.139.209's password: 
# Linux vps114686 6.12.38+deb13-amd64 #1 SMP PREEMPT_DYNAMIC Debian 6.12.38-1 (2025-07-16) x86_64

# The programs included with the Debian GNU/Linux system are free software;
# the exact distribution terms for each program are described in the
# individual files in /usr/share/doc/*/copyright.

# Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
# permitted by applicable law.
# Last login: Sun Nov  2 16:48:03 2025 from 102.67.255.129
# lanfial@vps114686:~$ ls
# backendsupply
# lanfial@vps114686:~$ cd ..
# lanfial@vps114686:/home$ cd lanfial
# lanfial@vps114686:~$ ls
# backendsupply
# lanfial@vps114686:~$ git clone https://github.com/HARD953/distribut.git
# Clonage dans 'distribut'...
# remote: Enumerating objects: 271, done.
# remote: Counting objects: 100% (271/271), done.
# remote: Compressing objects: 100% (177/177), done.
# remote: Total 271 (delta 153), reused 208 (delta 90), pack-reused 0 (from 0)
# R?ception d'objets: 100% (271/271), 397.30 Kio | 4.37 Mio/s, fait.
# R?solution des deltas: 100% (153/153), fait.
# lanfial@vps114686:~$ cd distribut/
# lanfial@vps114686:~/distribut$ npm install

# added 517 packages, and audited 518 packages in 30s

# 155 packages are looking for funding
#   run `npm fund` for details

# 3 vulnerabilities (2 low, 1 moderate)

# To address issues that do not require attention, run:
#   npm audit fix

# To address all issues, run:
#   npm audit fix --force

# Run `npm audit` for details.
# npm notice
# npm notice New major version of npm available! 10.8.2 -> 11.6.2
# npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.6.2
# npm notice To update run: npm install -g npm@11.6.2
# npm notice
# lanfial@vps114686:~/distribut$ nano .env.production
# lanfial@vps114686:~/distribut$ nano ecosystem.config.js
# lanfial@vps114686:~/distribut$ mkdir -p /home/lanfial/logs
# lanfial@vps114686:~/distribut$ pm2 start ecosystem.config.js
# pm2 save
# pm2 startup

#                         -------------

# __/\\\\\\\\\\\\\____/\\\\____________/\\\\____/\\\\\\\\\_____
#  _\/\\\/////////\\\_\/\\\\\\________/\\\\\\__/\\\///////\\\___
#   _\/\\\_______\/\\\_\/\\\//\\\____/\\\//\\\_\///______\//\\\__
#    _\/\\\\\\\\\\\\\/__\/\\\\///\\\/\\\/_\/\\\___________/\\\/___
#     _\/\\\/////////____\/\\\__\///\\\/___\/\\\________/\\\//_____
#      _\/\\\_____________\/\\\____\///_____\/\\\_____/\\\//________
#       _\/\\\_____________\/\\\_____________\/\\\___/\\\/___________
#        _\/\\\_____________\/\\\_____________\/\\\__/\\\\\\\\\\\\\\\_
#         _\///______________\///______________\///__\///////////////__


#                           Runtime Edition

#         PM2 is a Production Process Manager for Node.js applications
#                      with a built-in Load Balancer.

#                 Start and Daemonize any application:
#                 $ pm2 start app.js

#                 Load Balance 4 instances of api.js:
#                 $ pm2 start api.js -i 4

#                 Monitor in production:
#                 $ pm2 monitor

#                 Make pm2 auto-boot at server restart:
#                 $ pm2 startup

#                 To go further checkout:
#                 http://pm2.io/


#                         -------------

# [PM2] This PM2 is not UP TO DATE
# [PM2] Upgrade to version 6.0.13
# [PM2] Spawning PM2 daemon with pm2_home=/home/lanfial/.pm2
# [PM2] PM2 Successfully daemonized
# [PM2][WARN] Applications lanfialink-frontend not running, starting...
# [PM2] App [lanfialink-frontend] launched (12 instances)
# ┌────┬────────────────────────┬─────────────┬─────────┬─────────┬──────────┬────────┬──────┬───────────┬──────────┬──────────┬──────────┬──────────┐
# │ id │ name                   │ namespace   │ version │ mode    │ pid      │ uptime │ ↺    │ status    │ cpu      │ mem      │ user     │ watching │
# ├────┼────────────────────────┼─────────────┼─────────┼─────────┼──────────┼────────┼──────┼───────────┼──────────┼──────────┼──────────┼──────────┤
# │ 0  │ lanfialink-frontend    │ default     │ N/A     │ cluster │ 726732   │ 0s     │ 0    │ online    │ 0%       │ 61.5mb   │ lanfial  │ disabled │
# │ 1  │ lanfialink-frontend    │ default     │ N/A     │ cluster │ 726739   │ 0s     │ 0    │ online    │ 0%       │ 61.8mb   │ lanfial  │ disabled │
# │ 2  │ lanfialink-frontend    │ default     │ N/A     │ cluster │ 726746   │ 0s     │ 0    │ online    │ 0%       │ 61.9mb   │ lanfial  │ disabled │
# │ 3  │ lanfialink-frontend    │ default     │ N/A     │ cluster │ 726753   │ 0s     │ 0    │ online    │ 0%       │ 62.6mb   │ lanfial  │ disabled │
# │ 4  │ lanfialink-frontend    │ default     │ N/A     │ cluster │ 726764   │ 0s     │ 0    │ online    │ 0%       │ 61.6mb   │ lanfial  │ disabled │
# │ 5  │ lanfialink-frontend    │ default     │ N/A     │ cluster │ 726775   │ 0s     │ 0    │ online    │ 0%       │ 59.9mb   │ lanfial  │ disabled │
# │ 6  │ lanfialink-frontend    │ default     │ N/A     │ cluster │ 726786   │ 0s     │ 0    │ online    │ 0%       │ 58.3mb   │ lanfial  │ disabled │
# │ 7  │ lanfialink-frontend    │ default     │ N/A     │ cluster │ 726797   │ 0s     │ 0    │ online    │ 0%       │ 55.8mb   │ lanfial  │ disabled │
# │ 8  │ lanfialink-frontend    │ default     │ N/A     │ cluster │ 726818   │ 0s     │ 0    │ online    │ 0%       │ 55.0mb   │ lanfial  │ disabled │
# │ 9  │ lanfialink-frontend    │ default     │ N/A     │ cluster │ 726842   │ 0s     │ 0    │ online    │ 0%       │ 53.0mb   │ lanfial  │ disabled │
# │ 10 │ lanfialink-frontend    │ default     │ N/A     │ cluster │ 726854   │ 0s     │ 0    │ online    │ 0%       │ 50.5mb   │ lanfial  │ disabled │
# │ 11 │ lanfialink-frontend    │ default     │ N/A     │ cluster │ 726865   │ 0s     │ 0    │ online    │ 0%       │ 48.0mb   │ lanfial  │ disabled │
# └────┴────────────────────────┴─────────────┴─────────┴─────────┴──────────┴────────┴──────┴───────────┴──────────┴──────────┴──────────┴──────────┘
# [PM2] Saving current process list...
# [PM2] Successfully saved in /home/lanfial/.pm2/dump.pm2
# [PM2] Init System found: systemd
# [PM2] To setup the Startup Script, copy/paste the following command:
# sudo env PATH=$PATH:/usr/bin /usr/lib/node_modules/pm2/bin/pm2 startup systemd -u lanfial --hp /home/lanfial
# lanfial@vps114686:~/distribut$ sudo nano /etc/nginx/sites-available/lanfialink-frontend
# [sudo] password for lanfial: 
# lanfial@vps114686:~/distribut$ sudo nano /etc/nginx/sites-available/lanfialink-frontend
# lanfial@vps114686:~/distribut$ sudo ln -s /etc/nginx/sites-available/lanfialink-frontend /etc/nginx/sites-enabled/
# lanfial@vps114686:~/distribut$ sudo nginx -t
# 2025/11/02 18:49:02 [emerg] 788761#788761: cannot load certificate "/etc/letsencrypt/live/lanfialink.com/fullchain.pem": BIO_new_file() failed (SSL: error:80000002:system library::No such file or directory:calling fopen(/etc/letsencrypt/live/lanfialink.com/fullchain.pem, r) error:10000080:BIO routines::no such file)
# nginx: configuration file /etc/nginx/nginx.conf test failed
# lanfial@vps114686:~/distribut$ sudo systemctl reload nginx
# Job for nginx.service failed.
# See "systemctl status nginx.service" and "journalctl -xeu nginx.service" for details.
# lanfial@vps114686:~/distribut$ systemctl status nginx.service
# ● nginx.service - A high performance web server and a reverse proxy server
#      Loaded: loaded (/lib/systemd/system/nginx.service; enabled; preset: enabled)
#     Drop-In: /run/systemd/system/service.d
#              └─zzz-lxc-service.conf
#      Active: active (running) since Mon 2025-09-22 23:43:59 CEST; 1 month 10 days ago
#        Docs: man:nginx(8)
#     Process: 793209 ExecReload=/usr/sbin/nginx -g daemon on; master_process on; -s reload (code=exited, status=1/FAILURE)
#    Main PID: 3971694 (nginx)
#       Tasks: 13 (limit: 3412)
#      Memory: 36.6M
#         CPU: 2min 37.606s
#      CGroup: /system.slice/nginx.service
#              ├─ 725440 "nginx: worker process"
#              ├─ 725441 "nginx: worker process"
#              ├─ 725442 "nginx: worker process"
#              ├─ 725443 "nginx: worker process"
#              ├─ 725444 "nginx: worker process"
#              ├─ 725445 "nginx: worker process"
#              ├─ 725446 "nginx: worker process"
#              ├─ 725447 "nginx: worker process"
#              ├─ 725448 "nginx: worker process"
#              ├─ 725449 "nginx: worker process"
#              ├─ 725450 "nginx: worker process"
#              ├─ 725451 "nginx: worker process"
#              └─3971694 "nginx: master process /usr/sbin/nginx -g daemon on; master_process on;"

# Warning: some journal files were not opened due to insufficient permissions.
# lanfial@vps114686:~/distribut$ sudo certbot --nginx -d lanfialink.com
# Saving debug log to /var/log/letsencrypt/letsencrypt.log
# Error while running nginx -c /etc/nginx/nginx.conf -t.

# 2025/11/02 18:50:27 [emerg] 808494#808494: cannot load certificate "/etc/letsencrypt/live/lanfialink.com/fullchain.pem": BIO_new_file() failed (SSL: error:80000002:system library::No such file or directory:calling fopen(/etc/letsencrypt/live/lanfialink.com/fullchain.pem, r) error:10000080:BIO routines::no such file)
# nginx: configuration file /etc/nginx/nginx.conf test failed

# The nginx plugin is not working; there may be problems with your existing configuration.
# The error was: MisconfigurationError('Error while running nginx -c /etc/nginx/nginx.conf -t.\n\n2025/11/02 18:50:27 [emerg] 808494#808494: cannot load certificate "/etc/letsencrypt/live/lanfialink.com/fullchain.pem": BIO_new_file() failed (SSL: error:80000002:system library::No such file or directory:calling fopen(/etc/letsencrypt/live/lanfialink.com/fullchain.pem, r) error:10000080:BIO routines::no such file)\nnginx: configuration file /etc/nginx/nginx.conf test failed\n')
# lanfial@vps114686:~/distribut$ 
# lanfial@vps114686:~/distribut$ 
# lanfial@vps114686:~/distribut$ sudo nano /etc/nginx/sites-available/lanfialink-frontend
# lanfial@vps114686:~/distribut$ cd /etc/nginx/sites-available/
# lanfial@vps114686:/etc/nginx/sites-available$ ls
# default  lanfia-backend  lanfia-frontend  lanfialink-backend  lanfialink-frontend
# lanfial@vps114686:/etc/nginx/sites-available$ sudo nano lanfialink-frontend
# lanfial@vps114686:/etc/nginx/sites-available$ rm -rf lanfialink-frontend
# rm: cannot remove 'lanfialink-frontend': Permission denied
# lanfial@vps114686:/etc/nginx/sites-available$ sudo rm -rf lanfialink-frontend
# lanfial@vps114686:/etc/nginx/sites-available$ sudo nano lanfialink-frontend
# lanfial@vps114686:/etc/nginx/sites-available$ sudo nginx -t
# nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
# nginx: configuration file /etc/nginx/nginx.conf test is successful
# lanfial@vps114686:/etc/nginx/sites-available$ sudo systemctl reload nginx
# lanfial@vps114686:/etc/nginx/sites-available$ sudo certbot --nginx -d lanfialink.com
# Saving debug log to /var/log/letsencrypt/letsencrypt.log
# Requesting a certificate for lanfialink.com

# Certbot failed to authenticate some domains (authenticator: nginx). The Certificate Authority reported these problems:
#   Domain: lanfialink.com
#   Type:   unauthorized
#   Detail: 213.255.195.49: Invalid response from http://lanfialink.com/.well-known/acme-challenge/rXuw2KFc5y_VUm1b96sw1bvXYNH090_48NpW9c7q7C8: 404

# Hint: The Certificate Authority failed to verify the temporary nginx configuration changes made by Certbot. Ensure the listed domains point to this nginx server and that it is accessible from the internet.

# Some challenges have failed.
# Ask for help or search for solutions at https://community.letsencrypt.org. See the logfile /var/log/letsencrypt/letsencrypt.log or re-run Certbot with -v for more details.
# lanfial@vps114686:/etc/nginx/sites-available$ sudo nano lanfia-frontend

#   GNU nano 7.2                                                                                       lanfia-frontend                                                                                                 
# # HTTP  ^f^r HTTPS redirect
# server {
#     listen 80;
#     server_name pushtrack360.com www.pushtrack360.com;
#     return 301 https://$server_name$request_uri;
# }

# # HTTPS server
# server {
#     listen 443 ssl http2;
#     server_name pushtrack360.com www.pushtrack360.com;

#     # SSL configuration

#     # Security headers
#     add_header X-Frame-Options "SAMEORIGIN" always;
#     add_header X-XSS-Protection "1; mode=block" always;
#     add_header X-Content-Type-Options "nosniff" always;

#     # Next.js static files - CONFIGURATION CRITIQUE
#     location ~* ^/_next/static/(.+)$ {
#     alias /var/www/frontend/.next/static/$1;
#     expires 1y;
#     add_header Cache-Control "public, immutable";
#     access_log off;

#     # Emp  cher le listing de dossier
#     autoindex off;
# }

#     # Public folder
#     location /public/ {
#         alias /var/www/frontend/public/;
#         expires 1d;
#         add_header Cache-Control "public";
#         access_log off;
#     }

#     # Main application
#     location / {
#         proxy_pass http://127.0.0.1:3000;
#         proxy_http_version 1.1;
#         proxy_set_header Upgrade $http_upgrade;
#         proxy_set_header Connection 'upgrade';
#         proxy_set_header Host $host;
#         proxy_set_header X-Real-IP $remote_addr;
#         proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#         proxy_set_header X-Forwarded-Proto $scheme;
#         proxy_cache_bypass $http_upgrade;

#         # Timeouts
#         proxy_connect_timeout 300s;
#         proxy_send_timeout 300s;
#         proxy_read_timeout 300s;
#     }

#     # Block hidden files

# # Block hidden files
#     location ~ /\. {
#         deny all;
#         return 404;
#     }

#     # Client settings
#     client_max_body_size 100M;
#     keepalive_timeout 15;


# NEXT_PUBLIC_API_URL=https://api.lanfialink.com
# NEXT_PUBLIC_APP_URL=https://lanfialink.com



# # HTTP → HTTPS redirect
# server {
#     listen 80;
#     server_name lanfialink.com www.lanfialink.com;
#     return 301 https://$server_name$request_uri;
# }

# # HTTPS server
# server {
#     listen 443 ssl http2;
#     server_name lanfialink.com www.lanfialink.com;

#     # SSL configuration
#     # ssl_certificate /etc/letsencrypt/live/lanfialink.com/fullchain.pem;
#     # ssl_certificate_key /etc/letsencrypt/live/lanfialink.com/privkey.pem;
#     # include /etc/letsencrypt/options-ssl-nginx.conf;
#     # ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;

#     # Security headers
#     add_header X-Frame-Options "SAMEORIGIN" always;
#     add_header X-XSS-Protection "1; mode=block" always;
#     add_header X-Content-Type-Options "nosniff" always;

#     # Next.js static files - CONFIGURATION CRITIQUE
#     location /_next/static/ {
#         alias /var/www/frontlink/.next/static/;
#         expires 1y;
#         add_header Cache-Control "public, immutable";
#         access_log off;
#     }

#     # Public folder
#     location /public/ {
#         alias /var/www/frontlink/public/;
#         expires 1d;
#         add_header Cache-Control "public";
#         access_log off;
#     }

#     # Main application
#     location / {
#         proxy_pass http://127.0.0.1:3001;
#         proxy_http_version 1.1;
#         proxy_set_header Upgrade $http_upgrade;
#         proxy_set_header Connection 'upgrade';
#         proxy_set_header Host $host;
#         proxy_set_header X-Real-IP $remote_addr;
#         proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#         proxy_set_header X-Forwarded-Proto $scheme;
#         proxy_cache_bypass $http_upgrade;
        
#         # Timeouts
#         proxy_connect_timeout 300s;
#         proxy_send_timeout 300s;
#         proxy_read_timeout 300s;
#     }

#     # Block hidden files
#     location ~ /\. {
#         deny all;
#         return 404;
#     }

#     # Client settings
#     client_max_body_size 100M;
#     keepalive_timeout 15;
# }



# location ~* ^/_next/static/(.+)$ {
#     alias /var/www/frontend/.next/static/$1;
#     expires 1y;
#     add_header Cache-Control "public, immutable";
#     access_log off;
    
#     # Empêcher le listing de dossier
#     autoindex off;
# }


# location /_next/static/ {
#     alias /var/www/frontend/.next/static/;
#     expires 1y;
#     add_header Cache-Control "public, immutable";
#     access_log off;
#     autoindex off;
# }